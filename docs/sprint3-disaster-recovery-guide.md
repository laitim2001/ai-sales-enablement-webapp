# ç½é›£æ¢å¾©æŒ‡å— (Disaster Recovery Guide)

**æ–‡ä»¶ç‰ˆæœ¬**: 1.0
**æœ€å¾Œæ›´æ–°**: 2025-10-06
**é©ç”¨ç¯„åœ**: Sprint 3 Week 6 - è³‡æ–™å‚™ä»½èˆ‡ç½é›£æ¢å¾©
**ç¶­è­·è€…**: ITé‹ç¶­åœ˜éšŠ

---

## ğŸ“‹ ç›®éŒ„

1. [ç½é›£æ¢å¾©æ¦‚è¿°](#ç½é›£æ¢å¾©æ¦‚è¿°)
2. [æ¢å¾©æ™‚é–“ç›®æ¨™ (RTO/RPO)](#æ¢å¾©æ™‚é–“ç›®æ¨™-rtorpo)
3. [å‚™ä»½ç­–ç•¥](#å‚™ä»½ç­–ç•¥)
4. [ç½é›£å ´æ™¯èˆ‡æ¢å¾©æµç¨‹](#ç½é›£å ´æ™¯èˆ‡æ¢å¾©æµç¨‹)
5. [å‚™ä»½é©—è­‰ç¨‹åº](#å‚™ä»½é©—è­‰ç¨‹åº)
6. [å®šæœŸæ¼”ç·´è¨ˆåŠƒ](#å®šæœŸæ¼”ç·´è¨ˆåŠƒ)
7. [ç·Šæ€¥è¯çµ¡æ¸…å–®](#ç·Šæ€¥è¯çµ¡æ¸…å–®)

---

## ğŸ¯ ç½é›£æ¢å¾©æ¦‚è¿°

æœ¬ç³»çµ±ç‚º**å…§éƒ¨ä½¿ç”¨çš„éŠ·å”®è³¦èƒ½å¹³å°**ï¼Œç½é›£æ¢å¾©ç­–ç•¥èšç„¦æ–¼ï¼š
- âœ… **æ¥­å‹™é€£çºŒæ€§**: æœ€å°åŒ–ç³»çµ±åœæ©Ÿæ™‚é–“
- âœ… **è³‡æ–™å®Œæ•´æ€§**: ç¢ºä¿å®¢æˆ¶å’ŒéŠ·å”®æ•¸æ“šä¸éºå¤±
- âœ… **å¿«é€Ÿæ¢å¾©**: 4å°æ™‚å…§æ¢å¾©é—œéµæ¥­å‹™åŠŸèƒ½

### ç½é›£å®šç¾©

æœ¬ç³»çµ±å®šç¾©çš„ç½é›£åŒ…æ‹¬ä½†ä¸é™æ–¼ï¼š
- è³‡æ–™åº«ä¼ºæœå™¨æ•…éšœ
- æª”æ¡ˆç³»çµ±æå£
- æ‡‰ç”¨ç¨‹å¼ä¼ºæœå™¨æ•…éšœ
- äººç‚ºèª¤æ“ä½œ (èª¤åˆªé™¤è³‡æ–™)
- ç¶²è·¯å®‰å…¨äº‹ä»¶ (ransomware, è³‡æ–™æ´©éœ²)
- è‡ªç„¶ç½å®³ (ç«ç½ã€æ°´ç½å°è‡´æ©Ÿæˆ¿æå£)

---

## â±ï¸ æ¢å¾©æ™‚é–“ç›®æ¨™ (RTO/RPO)

### Recovery Time Objective (RTO) - æ¢å¾©æ™‚é–“ç›®æ¨™

**å®šç¾©**: å¾ç½é›£ç™¼ç”Ÿåˆ°ç³»çµ±æ¢å¾©æ­£å¸¸é‹è¡Œæ‰€éœ€çš„æœ€å¤§æ™‚é–“

| ç³»çµ±çµ„ä»¶ | RTOç›®æ¨™ | å„ªå…ˆç´š | å‚™è¨» |
|---------|---------|--------|------|
| è³‡æ–™åº« (PostgreSQL) | **4å°æ™‚** | ğŸ”´ æ¥µé«˜ | æ ¸å¿ƒæ¥­å‹™è³‡æ–™ |
| æ‡‰ç”¨ç¨‹å¼ä¼ºæœå™¨ | **2å°æ™‚** | ğŸ”´ æ¥µé«˜ | éƒ¨ç½²è‡ªå‹•åŒ– |
| æª”æ¡ˆç³»çµ± (uploads/) | **8å°æ™‚** | ğŸŸ¡ é«˜ | éå³æ™‚é—œéµ |
| Azure OpenAIæœå‹™ | **1å°æ™‚** | ğŸŸ¡ é«˜ | ä¾è³´ç¬¬ä¸‰æ–¹æœå‹™ |

**æ•´é«”RTOç›®æ¨™**: **4å°æ™‚å…§æ¢å¾©é—œéµæ¥­å‹™åŠŸèƒ½**

### Recovery Point Objective (RPO) - æ¢å¾©é»ç›®æ¨™

**å®šç¾©**: å¯å®¹å¿çš„æœ€å¤§è³‡æ–™éºå¤±æ™‚é–“

| è³‡æ–™é¡å‹ | RPOç›®æ¨™ | å‚™ä»½é »ç‡ | å‚™è¨» |
|---------|---------|----------|------|
| å®¢æˆ¶è³‡æ–™ | **â‰¤6å°æ™‚** | æ¯6å°æ™‚å¢é‡ | æ¯æ—¥å®Œæ•´å‚™ä»½ |
| éŠ·å”®ææ¡ˆ | **â‰¤6å°æ™‚** | æ¯6å°æ™‚å¢é‡ | æ¯æ—¥å®Œæ•´å‚™ä»½ |
| çŸ¥è­˜åº«æ–‡ç«  | **â‰¤24å°æ™‚** | æ¯æ—¥å®Œæ•´å‚™ä»½ | ä½è®Šæ›´é »ç‡ |
| ä¸Šå‚³æª”æ¡ˆ | **â‰¤24å°æ™‚** | æ¯æ—¥å®Œæ•´å‚™ä»½ | æ­·å²æª”æ¡ˆ |

**æ•´é«”RPOç›®æ¨™**: **æœ€å¤šéºå¤±æœ€è¿‘6å°æ™‚çš„è³‡æ–™è®Šæ›´**

---

## ğŸ’¾ å‚™ä»½ç­–ç•¥

### 1. è³‡æ–™åº«å‚™ä»½ (PostgreSQL)

#### å®Œæ•´å‚™ä»½ (Full Backup)
- **é »ç‡**: æ¯æ—¥å‡Œæ™¨02:00åŸ·è¡Œ
- **ä¿ç•™æœŸ**: 30å¤©
- **æ ¼å¼**: SQL (ä½¿ç”¨pg_dump)
- **å£“ç¸®**: gzip (ç´„70%å£“ç¸®ç‡)
- **åŠ å¯†**: AES-256 (ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ä¸­çš„ENCRYPTION_KEY)

**åŸ·è¡Œå‘½ä»¤**:
```bash
npx tsx scripts/backup/database-backup.ts --type=full
```

#### å¢é‡å‚™ä»½ (Incremental Backup)
- **é »ç‡**: æ¯6å°æ™‚åŸ·è¡Œ (08:00, 14:00, 20:00)
- **ä¿ç•™æœŸ**: 7å¤©
- **å¯¦æ–½æ–¹å¼**: PostgreSQL WALæ­¸æª” (éœ€é…ç½®postgresql.conf)

**åŸ·è¡Œå‘½ä»¤**:
```bash
npx tsx scripts/backup/database-backup.ts --type=incremental
```

### 2. æª”æ¡ˆç³»çµ±å‚™ä»½ (uploads/)

#### å®Œæ•´å‚™ä»½
- **é »ç‡**: æ¯æ—¥å‡Œæ™¨03:00åŸ·è¡Œ
- **ä¿ç•™æœŸ**: 30å¤©
- **æ ¼å¼**: tar.gz
- **æ’é™¤**: *.tmp, *.temp, .DS_Store, Thumbs.db

**åŸ·è¡Œå‘½ä»¤**:
```bash
npx tsx scripts/backup/file-system-backup.ts --type=full
```

#### å¢é‡å‚™ä»½
- **é »ç‡**: æ¯æ—¥14:00åŸ·è¡Œ
- **ä¿ç•™æœŸ**: 7å¤©
- **ç¯„åœ**: æœ€è¿‘24å°æ™‚ä¿®æ”¹çš„æª”æ¡ˆ

**åŸ·è¡Œå‘½ä»¤**:
```bash
npx tsx scripts/backup/file-system-backup.ts --type=incremental
```

### 3. çµ±ä¸€å‚™ä»½èª¿åº¦

**åŸ·è¡Œå‘½ä»¤** (æ¨è–¦ä½¿ç”¨çµ±ä¸€èª¿åº¦å™¨):
```bash
# å®Œæ•´å‚™ä»½ (è³‡æ–™åº« + æª”æ¡ˆç³»çµ±)
npx tsx scripts/backup/backup-scheduler.ts --type=full

# å¢é‡å‚™ä»½
npx tsx scripts/backup/backup-scheduler.ts --type=incremental
```

### 4. å‚™ä»½å­˜å„²ä½ç½®

| å‚™ä»½é¡å‹ | ä¸»å­˜å„²ä½ç½® | ç•°åœ°å‚™ä»½ | å‚™è¨» |
|---------|-----------|----------|------|
| è³‡æ–™åº«å‚™ä»½ | `/backups/database/` | â˜ï¸ Azure Blob Storage (å¾…å¯¦æ–½) | æœ¬åœ° + é›²ç«¯é›™é‡ä¿éšœ |
| æª”æ¡ˆå‚™ä»½ | `/backups/files/` | â˜ï¸ Azure Blob Storage (å¾…å¯¦æ–½) | æœ¬åœ° + é›²ç«¯é›™é‡ä¿éšœ |
| å‚™ä»½å ±å‘Š | `/backups/reports/` | æœ¬åœ° | JSONæ ¼å¼å‚™ä»½åŸ·è¡Œå ±å‘Š |

---

## ğŸš¨ ç½é›£å ´æ™¯èˆ‡æ¢å¾©æµç¨‹

### å ´æ™¯1: è³‡æ–™åº«å®Œå…¨æå£

**ç½é›£æè¿°**: PostgreSQLè³‡æ–™åº«æª”æ¡ˆæå£ï¼Œç„¡æ³•å•Ÿå‹•

**æ¢å¾©æµç¨‹**:

1. **åœæ­¢æ‡‰ç”¨ç¨‹å¼** (é˜²æ­¢é€²ä¸€æ­¥è³‡æ–™æå£)
   ```bash
   pm2 stop ai-sales-platform
   # æˆ– systemctl stop ai-sales-platform
   ```

2. **è©•ä¼°æå£ç¨‹åº¦**
   ```bash
   # æª¢æŸ¥PostgreSQLæ—¥èªŒ
   tail -n 100 /var/log/postgresql/postgresql-*.log

   # å˜—è©¦å•Ÿå‹•PostgreSQL
   sudo systemctl start postgresql
   ```

3. **é¸æ“‡æ¢å¾©é»**
   ```bash
   # åˆ—å‡ºå¯ç”¨å‚™ä»½
   ls -lh /backups/database/ | grep backup-

   # æŸ¥çœ‹å‚™ä»½æ—¥èªŒ
   cat /backups/database/backup-log.json | jq '.[] | select(.type=="full") | {timestamp, fileName, size}'
   ```

4. **å‰µå»ºPostgreSQLæ–°è³‡æ–™åº«**
   ```bash
   sudo -u postgres psql

   postgres=# DROP DATABASE IF EXISTS ai_sales_db;
   postgres=# CREATE DATABASE ai_sales_db;
   postgres=# \q
   ```

5. **æ¢å¾©å‚™ä»½**

   **å¦‚æœæ˜¯æœªåŠ å¯†çš„å‚™ä»½**:
   ```bash
   # è§£å£“ç¸®
   gunzip -k /backups/database/backup-2025-10-06.sql.gz

   # æ¢å¾©åˆ°è³‡æ–™åº«
   psql -h localhost -U username -d ai_sales_db -f /backups/database/backup-2025-10-06.sql
   ```

   **å¦‚æœæ˜¯åŠ å¯†çš„å‚™ä»½**:
   ```bash
   # å…ˆè§£å¯† (éœ€è¦ENCRYPTION_KEYç’°å¢ƒè®Šæ•¸)
   # åƒè€ƒscripts/restore/decrypt-backup.sh (å¾…å¯¦æ–½)

   # è§£å£“ç¸® â†’ æ¢å¾©
   ```

6. **é©—è­‰è³‡æ–™å®Œæ•´æ€§**
   ```bash
   psql -h localhost -U username -d ai_sales_db

   -- æª¢æŸ¥è³‡æ–™è¡¨æ•¸é‡
   SELECT count(*) FROM information_schema.tables WHERE table_schema='public';

   -- æª¢æŸ¥é—œéµè³‡æ–™è¡¨
   SELECT count(*) FROM "Customer";
   SELECT count(*) FROM "Proposal";
   SELECT count(*) FROM "KnowledgeBase";

   \q
   ```

7. **å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼**
   ```bash
   pm2 start ai-sales-platform
   # æˆ– systemctl start ai-sales-platform
   ```

8. **æ¸¬è©¦æ¥­å‹™åŠŸèƒ½**
   - ç™»å…¥ç³»çµ±
   - æŸ¥è©¢å®¢æˆ¶è³‡æ–™
   - å»ºç«‹æ¸¬è©¦ææ¡ˆ
   - æª¢æŸ¥çŸ¥è­˜åº«æœå°‹

**é ä¼°æ¢å¾©æ™‚é–“**: 2-4å°æ™‚ (å–æ±ºæ–¼è³‡æ–™åº«å¤§å°)

---

### å ´æ™¯2: èª¤åˆªé™¤å®¢æˆ¶è³‡æ–™

**ç½é›£æè¿°**: ä½¿ç”¨è€…æˆ–ç¨‹å¼ç¢¼éŒ¯èª¤å°è‡´æ‰¹é‡åˆªé™¤å®¢æˆ¶è³‡æ–™

**æ¢å¾©æµç¨‹**:

1. **ç«‹å³åœæ­¢åˆªé™¤æ“ä½œ**
   - å¦‚æœæ˜¯ç¨‹å¼ç¢¼éŒ¯èª¤ï¼Œç«‹å³åœæ­¢æ‡‰ç”¨ç¨‹å¼
   - å¦‚æœæ˜¯ä½¿ç”¨è€…èª¤æ“ä½œï¼Œç«‹å³ç¦ç”¨è©²ä½¿ç”¨è€…å¸³è™Ÿ

2. **è©•ä¼°æå¤±ç¯„åœ**
   ```sql
   -- æª¢æŸ¥å¯©è¨ˆæ—¥èªŒ (å¦‚æœå·²å¯¦æ–½Week 8å¯©è¨ˆç³»çµ±)
   SELECT * FROM "AuditLog"
   WHERE action = 'DELETE'
     AND resource_type = 'Customer'
     AND created_at > NOW() - INTERVAL '1 hour'
   ORDER BY created_at DESC;
   ```

3. **é¸æ“‡æ¢å¾©ç­–ç•¥**
   - **é¸é …A**: å¾æœ€æ–°å‚™ä»½æ¢å¾© (å¦‚æœåˆªé™¤æ™‚é–“åœ¨RPOç¯„åœå…§)
   - **é¸é …B**: éƒ¨åˆ†è³‡æ–™æ¢å¾© (å¾å‚™ä»½ä¸­å°å‡ºåˆªé™¤çš„è¨˜éŒ„)

4. **éƒ¨åˆ†è³‡æ–™æ¢å¾©** (æ¨è–¦æ–¹æ³•):

   ```bash
   # æ¢å¾©å‚™ä»½åˆ°è‡¨æ™‚è³‡æ–™åº«
   gunzip -k /backups/database/backup-latest.sql.gz

   sudo -u postgres psql
   postgres=# CREATE DATABASE ai_sales_db_restore;
   postgres=# \q

   psql -h localhost -U username -d ai_sales_db_restore -f /backups/database/backup-latest.sql
   ```

   ```sql
   -- å°å‡ºè¢«åˆªé™¤çš„å®¢æˆ¶è³‡æ–™
   \copy (SELECT * FROM "Customer" WHERE id IN (åˆ—å‡ºè¢«åˆªé™¤çš„ID)) TO '/tmp/deleted_customers.csv' WITH CSV HEADER;

   -- åœ¨ç”Ÿç”¢è³‡æ–™åº«ä¸­æ¢å¾©
   \c ai_sales_db
   \copy "Customer" FROM '/tmp/deleted_customers.csv' WITH CSV HEADER;
   ```

5. **é©—è­‰æ¢å¾©çµæœ**
   ```sql
   SELECT count(*) FROM "Customer";
   -- ç¢ºèªæ•¸é‡æ¢å¾©æ­£å¸¸
   ```

6. **äº‹å¾Œåˆ†æ**
   - è¨˜éŒ„ç½é›£åŸå› 
   - å¯¦æ–½é é˜²æªæ–½ (ä¾‹å¦‚: è»Ÿåˆªé™¤ç­–ç•¥)

**é ä¼°æ¢å¾©æ™‚é–“**: 30åˆ†é˜ - 2å°æ™‚

---

### å ´æ™¯3: æª”æ¡ˆç³»çµ±æå£

**ç½é›£æè¿°**: /uploadsç›®éŒ„æª”æ¡ˆæå£æˆ–èª¤åˆªé™¤

**æ¢å¾©æµç¨‹**:

1. **è©•ä¼°æå¤±ç¯„åœ**
   ```bash
   # æª¢æŸ¥uploadsç›®éŒ„ç‹€æ…‹
   ls -lR ./uploads/

   # çµ±è¨ˆæª”æ¡ˆæ•¸é‡
   find ./uploads -type f | wc -l
   ```

2. **é¸æ“‡æœ€æ–°å‚™ä»½**
   ```bash
   ls -lh /backups/files/ | grep file-backup-
   cat /backups/files/file-backup-log.json | jq '.[-1]'
   ```

3. **æ¢å¾©æª”æ¡ˆ**
   ```bash
   # å‰µå»ºè‡¨æ™‚ç›®éŒ„
   mkdir -p ./uploads-restore

   # è§£å£“ç¸®å‚™ä»½
   tar -xzf /backups/files/file-backup-latest.tar.gz -C ./uploads-restore/

   # æ¯”è¼ƒå·®ç•°
   diff -r ./uploads ./uploads-restore/

   # æ¢å¾©éºå¤±çš„æª”æ¡ˆ
   rsync -av ./uploads-restore/ ./uploads/
   ```

4. **é©—è­‰æª”æ¡ˆå®Œæ•´æ€§**
   ```bash
   # çµ±è¨ˆæ¢å¾©å¾Œçš„æª”æ¡ˆæ•¸é‡
   find ./uploads -type f | wc -l

   # æª¢æŸ¥é—œéµæª”æ¡ˆ
   ls -lh ./uploads/proposals/
   ls -lh ./uploads/knowledge-base/
   ```

**é ä¼°æ¢å¾©æ™‚é–“**: 1-2å°æ™‚

---

## âœ… å‚™ä»½é©—è­‰ç¨‹åº

### è‡ªå‹•é©—è­‰

å‚™ä»½è…³æœ¬å·²å…§å»ºé©—è­‰æ©Ÿåˆ¶ï¼š
- âœ… **æ ¡é©—å’Œé©—è­‰**: SHA-256ç¢ºä¿å‚™ä»½å®Œæ•´æ€§
- âœ… **å£“ç¸®åŒ…é©—è­‰**: tar/gzipå®Œæ•´æ€§æ¸¬è©¦
- âœ… **æ—¥èªŒè¨˜éŒ„**: æ‰€æœ‰å‚™ä»½æ“ä½œè©³ç´°è¨˜éŒ„

### æ‰‹å‹•é©—è­‰ (æ¯é€±åŸ·è¡Œ)

**1. è³‡æ–™åº«å‚™ä»½é©—è­‰**:
```bash
# åˆ—å‡ºæ‰€æœ‰è³‡æ–™åº«å‚™ä»½
ls -lh /backups/database/

# æª¢æŸ¥å‚™ä»½æ—¥èªŒ
cat /backups/database/backup-log.json | jq '.[-5:]'

# è§£å£“ç¸®æœ€æ–°å‚™ä»½ä¸¦æª¢æŸ¥SQLèªæ³•
gunzip -c /backups/database/backup-latest.sql.gz | head -n 50
```

**2. æª”æ¡ˆå‚™ä»½é©—è­‰**:
```bash
# åˆ—å‡ºæ‰€æœ‰æª”æ¡ˆå‚™ä»½
ls -lh /backups/files/

# æª¢æŸ¥å‚™ä»½å…§å®¹ (ä¸è§£å£“ç¸®)
tar -tzf /backups/files/file-backup-latest.tar.gz | head -n 20

# é©—è­‰æª”æ¡ˆæ•¸é‡
tar -tzf /backups/files/file-backup-latest.tar.gz | wc -l
```

**3. å‚™ä»½å®Œæ•´æ€§æ¸¬è©¦** (æ¯æœˆåŸ·è¡Œ):
```bash
# å®Œæ•´è§£å£“ç¸®é©—è­‰
mkdir -p /tmp/backup-verify
tar -xzf /backups/files/file-backup-latest.tar.gz -C /tmp/backup-verify/

# éš¨æ©ŸæŠ½æ¨£é©—è­‰10å€‹æª”æ¡ˆ
find /tmp/backup-verify -type f | shuf -n 10 | xargs -I {} file {}

# æ¸…ç†
rm -rf /tmp/backup-verify
```

---

## ğŸ§ª å®šæœŸæ¼”ç·´è¨ˆåŠƒ

### æ¼”ç·´é »ç‡

| æ¼”ç·´é¡å‹ | é »ç‡ | è² è²¬äºº | æ–‡æª”è¦æ±‚ |
|---------|------|--------|---------|
| è³‡æ–™åº«æ¢å¾©æ¼”ç·´ | **æ¯å­£** | è³‡æ–™åº«ç®¡ç†å“¡ | æ¼”ç·´å ±å‘Š |
| æª”æ¡ˆæ¢å¾©æ¼”ç·´ | **æ¯å­£** | ç³»çµ±ç®¡ç†å“¡ | æ¼”ç·´å ±å‘Š |
| å®Œæ•´ç½é›£æ¢å¾©æ¼”ç·´ | **æ¯åŠå¹´** | ITç¶“ç† | è©³ç´°æ¼”ç·´å ±å‘Š + æ”¹é€²è¨ˆåŠƒ |

### æ¼”ç·´æµç¨‹

**1. æº–å‚™éšæ®µ** (æ¼”ç·´å‰1é€±):
- ç¢ºèªæ¼”ç·´æ™‚é–“å’Œç¯„åœ
- æº–å‚™æ¸¬è©¦ç’°å¢ƒ
- é€šçŸ¥ç›¸é—œäººå“¡

**2. åŸ·è¡Œéšæ®µ** (æ¼”ç·´ç•¶å¤©):
- æ¨¡æ“¬ç½é›£å ´æ™¯
- åŸ·è¡Œæ¢å¾©æµç¨‹
- è¨˜éŒ„æ¯å€‹æ­¥é©Ÿçš„æ™‚é–“
- æ‹ç…§/éŒ„å½±è¨˜éŒ„éç¨‹

**3. é©—è­‰éšæ®µ**:
- æª¢æŸ¥æ¢å¾©çš„è³‡æ–™å®Œæ•´æ€§
- æ¸¬è©¦æ¥­å‹™åŠŸèƒ½
- å°æ¯”RTO/RPOç›®æ¨™

**4. ç¸½çµéšæ®µ** (æ¼”ç·´å¾Œ1é€±å…§):
- æ’°å¯«æ¼”ç·´å ±å‘Š
- è­˜åˆ¥æ”¹é€²é»
- æ›´æ–°ç½é›£æ¢å¾©æ–‡æª”

### æ¼”ç·´æª¢æŸ¥æ¸…å–®

#### è³‡æ–™åº«æ¢å¾©æ¼”ç·´æª¢æŸ¥æ¸…å–®

- [ ] æº–å‚™æ¸¬è©¦ç’°å¢ƒ (éš”é›¢çš„è³‡æ–™åº«å¯¦ä¾‹)
- [ ] é¸æ“‡æœ€æ–°å®Œæ•´å‚™ä»½
- [ ] è¨˜éŒ„é–‹å§‹æ™‚é–“
- [ ] å‰µå»ºæ–°è³‡æ–™åº«
- [ ] æ¢å¾©å‚™ä»½
- [ ] é©—è­‰è³‡æ–™è¡¨æ•¸é‡
- [ ] é©—è­‰é—œéµè³‡æ–™è¨˜éŒ„æ•¸
- [ ] æ¸¬è©¦æ‡‰ç”¨ç¨‹å¼é€£æ¥
- [ ] è¨˜éŒ„çµæŸæ™‚é–“
- [ ] è¨ˆç®—RTOé”æˆç‡
- [ ] æ’°å¯«æ¼”ç·´å ±å‘Š

#### å®Œæ•´ç½é›£æ¢å¾©æ¼”ç·´æª¢æŸ¥æ¸…å–®

- [ ] æ¨¡æ“¬å®Œå…¨ä¼ºæœå™¨æ•…éšœ
- [ ] æº–å‚™æ–°ä¼ºæœå™¨/è™›æ“¬æ©Ÿ
- [ ] å®‰è£ä½œæ¥­ç³»çµ±å’Œä¾è³´
- [ ] æ¢å¾©è³‡æ–™åº«å‚™ä»½
- [ ] æ¢å¾©æª”æ¡ˆå‚™ä»½
- [ ] é…ç½®æ‡‰ç”¨ç¨‹å¼
- [ ] å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼
- [ ] æ¸¬è©¦æ‰€æœ‰æ¥­å‹™åŠŸèƒ½
- [ ] é©—è­‰RTO/RPOç›®æ¨™
- [ ] æ’°å¯«è©³ç´°å ±å‘Š
- [ ] æ›´æ–°æ”¹é€²è¨ˆåŠƒ

---

## ğŸ“ ç·Šæ€¥è¯çµ¡æ¸…å–®

### é—œéµäººå“¡è¯çµ¡è³‡è¨Š

| è§’è‰² | å§“å | é›»è©± | é›»å­éƒµä»¶ | å‚™è¨» |
|------|------|------|---------|------|
| ITç¶“ç† | [å§“å] | [é›»è©±] | [éƒµä»¶] | ç½é›£æ±ºç­– |
| è³‡æ–™åº«ç®¡ç†å“¡ | [å§“å] | [é›»è©±] | [éƒµä»¶] | è³‡æ–™åº«æ¢å¾© |
| ç³»çµ±ç®¡ç†å“¡ | [å§“å] | [é›»è©±] | [éƒµä»¶] | ä¼ºæœå™¨ç®¡ç† |
| æ‡‰ç”¨é–‹ç™¼è² è²¬äºº | [å§“å] | [é›»è©±] | [éƒµä»¶] | æ‡‰ç”¨ç¨‹å¼å•é¡Œ |
| æ¥­å‹™è² è²¬äºº | [å§“å] | [é›»è©±] | [éƒµä»¶] | æ¥­å‹™å½±éŸ¿è©•ä¼° |

### ç¬¬ä¸‰æ–¹ä¾›æ‡‰å•†è¯çµ¡

| ä¾›æ‡‰å•† | æœå‹™é¡å‹ | è¯çµ¡é›»è©± | æ”¯æ´Email | æ”¯æ´ç­‰ç´š |
|--------|---------|---------|-----------|---------|
| Azure Support | é›²ç«¯æœå‹™ | +886-XXX-XXXX | azure-support@microsoft.com | Premium |
| PostgreSQL Support | è³‡æ–™åº« | [é›»è©±] | [éƒµä»¶] | Community/Enterprise |
| [ç¡¬é«”ä¾›æ‡‰å•†] | ä¼ºæœå™¨ç¡¬é«” | [é›»è©±] | [éƒµä»¶] | 4å°æ™‚on-site |

### ç·Šæ€¥é€šçŸ¥æµç¨‹

```
ç½é›£ç™¼ç”Ÿ
    â†“
1. ç³»çµ±ç®¡ç†å“¡è©•ä¼°ç½é›£åš´é‡åº¦ (5åˆ†é˜å…§)
    â†“
2. é€šçŸ¥ITç¶“ç† (ç«‹å³)
    â†“
3. é€šçŸ¥æ¥­å‹™è² è²¬äºº (15åˆ†é˜å…§)
    â†“
4. å¬é›†æ¢å¾©åœ˜éšŠ (30åˆ†é˜å…§)
    â†“
5. åŸ·è¡Œç½é›£æ¢å¾©æµç¨‹
    â†“
6. æ¯å°æ™‚æ›´æ–°æ¢å¾©ç‹€æ…‹çµ¦æ¥­å‹™åœ˜éšŠ
    â†“
7. æ¢å¾©å®Œæˆå¾Œé€šçŸ¥æ‰€æœ‰ç›¸é—œäººå“¡
```

---

## ğŸ“Š é™„éŒ„ï¼šå‚™ä»½è…³æœ¬å¿«é€Ÿåƒè€ƒ

### è³‡æ–™åº«å‚™ä»½

```bash
# å®Œæ•´å‚™ä»½
npx tsx scripts/backup/database-backup.ts --type=full

# å¢é‡å‚™ä»½ (éœ€é…ç½®WALæ­¸æª”)
npx tsx scripts/backup/database-backup.ts --type=incremental

# ç’°å¢ƒè®Šæ•¸è¨­ç½®
export DATABASE_URL="postgresql://user:pass@host:5432/dbname"
export BACKUP_DIR="./backups/database"
export ENCRYPTION_KEY="[Base64ç·¨ç¢¼çš„32å­—ç¯€é‡‘é‘°]"
```

### æª”æ¡ˆç³»çµ±å‚™ä»½

```bash
# å®Œæ•´å‚™ä»½
npx tsx scripts/backup/file-system-backup.ts --type=full

# å¢é‡å‚™ä»½ (æœ€è¿‘24å°æ™‚)
npx tsx scripts/backup/file-system-backup.ts --type=incremental

# ç’°å¢ƒè®Šæ•¸è¨­ç½®
export UPLOAD_DIR="./uploads"
export BACKUP_DIR="./backups/files"
```

### çµ±ä¸€å‚™ä»½èª¿åº¦

```bash
# å®Œæ•´å‚™ä»½ (è³‡æ–™åº« + æª”æ¡ˆ)
npx tsx scripts/backup/backup-scheduler.ts --type=full

# åªå‚™ä»½è³‡æ–™åº«
npx tsx scripts/backup/backup-scheduler.ts --database-only

# åªå‚™ä»½æª”æ¡ˆ
npx tsx scripts/backup/backup-scheduler.ts --files-only
```

### Cronæ’ç¨‹è¨­ç½® (Linux/MacOS)

```bash
# ç·¨è¼¯crontab
crontab -e

# æ·»åŠ å‚™ä»½æ’ç¨‹
# æ¯æ—¥02:00å®Œæ•´å‚™ä»½
0 2 * * * cd /path/to/project && npx tsx scripts/backup/backup-scheduler.ts --type=full >> /var/log/backup.log 2>&1

# æ¯6å°æ™‚å¢é‡å‚™ä»½ (08:00, 14:00, 20:00)
0 8,14,20 * * * cd /path/to/project && npx tsx scripts/backup/backup-scheduler.ts --type=incremental >> /var/log/backup.log 2>&1
```

### Windows Task Schedulerè¨­ç½®

```powershell
# å‰µå»ºæ¯æ—¥å‚™ä»½ä»»å‹™
schtasks /create /tn "AI-Sales-Platform-Full-Backup" /tr "cd C:\path\to\project && npx tsx scripts/backup/backup-scheduler.ts --type=full" /sc daily /st 02:00 /ru SYSTEM

# å‰µå»ºæ¯6å°æ™‚å‚™ä»½ä»»å‹™
schtasks /create /tn "AI-Sales-Platform-Incremental-Backup" /tr "cd C:\path\to\project && npx tsx scripts/backup/backup-scheduler.ts --type=incremental" /sc daily /st 08:00 /ri 360 /du 24:00 /ru SYSTEM
```

---

## ğŸ“ æ–‡æª”ç¶­è­·

**ä¸‹æ¬¡å¯©æŸ¥æ—¥æœŸ**: 2025-11-06
**å¯©æŸ¥é€±æœŸ**: æ¯æœˆ
**æ–‡æª”æ“æœ‰è€…**: ITé‹ç¶­åœ˜éšŠ

**è®Šæ›´æ­·å²**:
- 2025-10-06 v1.0: åˆå§‹ç‰ˆæœ¬ (Sprint 3 Week 6)

---

**ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)**
**Co-Authored-By**: Claude <noreply@anthropic.com>
