# Sprint 7 - 用戶驗收測試計劃 (UAT Test Plan)

> **版本**: 1.0
> **日期**: 2025-10-05
> **Sprint**: Sprint 7 - 會議準備與智能助手
> **測試範圍**: Phase 1 + Phase 2 + Phase 3 + 智能助手對話UI

---

## 📋 測試概述

### 測試目標
驗證Sprint 7所有功能是否符合業務需求，確保系統可用性和用戶體驗達標。

### 測試範圍
1. **智能提醒系統** (Phase 1)
2. **用戶行為追蹤** (Phase 1)
3. **會議準備包** (Phase 1-3)
4. **會議智能分析** (Phase 2)
5. **個性化推薦** (Phase 2-3)
6. **Microsoft Graph日曆整合** (Phase 3)
7. **智能助手對話UI** (新增)

### 測試環境
- **環境**: Staging/UAT環境
- **瀏覽器**: Chrome, Firefox, Safari, Edge (最新版本)
- **設備**: 桌面端 + 移動端 (響應式測試)
- **用戶角色**: ADMIN, SALES_MANAGER, SALES_REP

---

## ✅ 測試用例

### 1. 智能提醒系統

#### TC-R001: 創建會議提醒
**前置條件**: 用戶已登入
**測試步驟**:
1. 訪問 `/api/reminders`
2. POST創建會議前1小時提醒
3. 驗證提醒創建成功

**預期結果**:
- ✅ 提醒創建成功
- ✅ 優先級自動設置為 URGENT
- ✅ 狀態為 PENDING

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

#### TC-R002: 延遲提醒
**前置條件**: 已有觸發的提醒
**測試步驟**:
1. 選擇一個提醒
2. 點擊"延遲"按鈕
3. 選擇延遲時間（15分鐘）
4. 確認延遲

**預期結果**:
- ✅ 提醒狀態變為 SNOOZED
- ✅ 延遲時間正確記錄
- ✅ UI更新延遲倒計時

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

### 2. 會議準備包

#### TC-P001: 創建準備包（向導模式）
**前置條件**: 用戶已登入
**測試步驟**:
1. 訪問 `/dashboard/meeting-prep`
2. 點擊"創建準備包"
3. 選擇"銷售會議"類型
4. 選擇模板或空白開始
5. 填寫會議信息
6. 添加3個準備項目
7. 預覽並確認

**預期結果**:
- ✅ 4步驟向導流程正常
- ✅ 準備包創建成功
- ✅ 包含3個項目
- ✅ 預計閱讀時間計算正確

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

#### TC-P002: 智能生成準備包
**前置條件**: 有會議信息
**測試步驟**:
1. POST `/api/meeting-prep` 帶會議信息
2. 選擇"智能生成"模式
3. 驗證自動生成的項目

**預期結果**:
- ✅ 根據會議類型自動推薦項目
- ✅ 至少包含3個相關項目
- ✅ 項目順序合理

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

### 3. 會議智能分析

#### TC-A001: AI分析會議信息
**前置條件**: Azure OpenAI配置正確
**測試步驟**:
1. POST `/api/meeting-intelligence/analyze`
2. 提供會議標題和描述
3. 驗證AI分析結果

**預期結果**:
- ✅ 成功提取參與者信息
- ✅ 識別會議主題
- ✅ 生成討論重點建議
- ✅ 提供潛在問題和答案
- ✅ 響應時間 < 5秒

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

### 4. 個性化推薦

#### TC-REC001: 獲取內容推薦
**前置條件**: 用戶有行為歷史
**測試步驟**:
1. GET `/api/recommendations/content?strategy=hybrid`
2. 驗證推薦結果
3. 測試4種策略 (collaborative/content_based/hybrid/popularity)

**預期結果**:
- ✅ 返回至少5個推薦項目
- ✅ 相關度分數 0-1 範圍
- ✅ 推薦理由清晰
- ✅ 4種策略結果有差異

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

#### TC-REC002: 推薦反饋
**前置條件**: 已獲取推薦
**測試步驟**:
1. 點擊推薦卡片的"喜歡"按鈕
2. POST `/api/recommendations/feedback`
3. 驗證反饋記錄

**預期結果**:
- ✅ 反饋成功記錄
- ✅ UI更新反饋狀態
- ✅ 統計數據更新

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

### 5. Microsoft Graph日曆整合

#### TC-CAL001: OAuth認證流程
**前置條件**: Azure AD配置正確
**測試步驟**:
1. GET `/api/calendar/auth`
2. 跳轉到Microsoft登入頁
3. 授權應用訪問日曆
4. 驗證回調處理

**預期結果**:
- ✅ 授權URL生成正確
- ✅ State參數驗證通過
- ✅ Token成功獲取和存儲
- ✅ 無CSRF漏洞

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

#### TC-CAL002: 日曆事件同步
**前置條件**: 已完成OAuth認證
**測試步驟**:
1. POST `/api/calendar/sync` (增量同步)
2. 驗證事件同步結果
3. 測試Delta Query機制

**預期結果**:
- ✅ 成功同步Microsoft日曆事件
- ✅ Delta token正確管理
- ✅ 增量更新高效
- ✅ 同步狀態準確

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

#### TC-CAL003: CalendarView三種視圖
**前置條件**: 有日曆事件
**測試步驟**:
1. 訪問日曆頁面
2. 切換日視圖、週視圖、月視圖
3. 測試時間導航
4. 測試搜索和篩選

**預期結果**:
- ✅ 三種視圖正確展示
- ✅ 時間導航流暢
- ✅ 搜索功能正常
- ✅ 響應式設計良好

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

### 6. 智能助手對話UI

#### TC-CHAT001: 發送訊息
**前置條件**: 用戶已登入
**測試步驟**:
1. 訪問 `/dashboard/assistant`
2. 輸入訊息 "幫我查找最近的客戶資料"
3. 按Enter發送
4. 驗證AI回應

**預期結果**:
- ✅ 訊息成功發送
- ✅ 載入指示器顯示
- ✅ AI回應生成 (< 5秒)
- ✅ 對話歷史正確保存

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

#### TC-CHAT002: 快捷操作
**前置條件**: 在助手頁面
**測試步驟**:
1. 點擊"創建提案"快捷按鈕
2. 驗證訊息自動填充
3. 驗證AI回應

**預期結果**:
- ✅ 訊息自動填充到輸入框
- ✅ 訊息自動發送
- ✅ AI提供提案創建指導

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

#### TC-CHAT003: 對話導出
**前置條件**: 有對話歷史
**測試步驟**:
1. 點擊"導出對話"按鈕
2. 驗證下載的文件

**預期結果**:
- ✅ 文件成功下載
- ✅ 格式為 .txt
- ✅ 包含完整對話歷史
- ✅ 時間戳正確

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

#### TC-CHAT004: 清空對話
**前置條件**: 有對話歷史
**測試步驟**:
1. 點擊"清空對話"按鈕
2. 確認刪除
3. 刷新頁面驗證

**預期結果**:
- ✅ 顯示確認對話框
- ✅ 對話成功清空
- ✅ 本地存儲清除
- ✅ 顯示歡迎訊息

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

## 🎯 整合測試場景

### 場景1: 完整會議準備流程
**測試步驟**:
1. 用戶收到會議提醒 (智能提醒)
2. 點擊提醒打開會議詳情
3. 系統自動生成準備包 (會議準備包 + AI分析)
4. 查看個性化推薦的相關內容 (推薦系統)
5. 同步Microsoft日曆 (日曆整合)
6. 使用AI助手詢問會議相關問題 (智能助手)

**預期結果**:
- ✅ 端到端流程順暢
- ✅ 所有功能正確協作
- ✅ 無數據不一致

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

### 場景2: 多用戶協作場景
**測試步驟**:
1. 用戶A創建會議準備包
2. 用戶B收到提醒
3. 用戶B查看準備包
4. 用戶B添加項目到準備包
5. 用戶A收到更新通知

**預期結果**:
- ✅ 多用戶操作無衝突
- ✅ 實時更新同步
- ✅ 通知正確發送

**實際結果**: _（待填寫）_
**狀態**: ⬜ Pass ⬜ Fail

---

## 📊 性能測試

### PT-001: 提醒系統性能
**測試條件**: 1000個活躍提醒
**測試指標**:
- ⬜ 創建提醒: < 100ms
- ⬜ 查詢提醒列表: < 200ms
- ⬜ 調度器檢查: < 500ms (60秒間隔)

---

### PT-002: 推薦系統性能
**測試條件**: 10000個用戶行為記錄
**測試指標**:
- ⬜ 生成推薦: < 500ms (有緩存)
- ⬜ 生成推薦: < 2s (無緩存)
- ⬜ 緩存命中率: > 80%

---

### PT-003: AI分析性能
**測試條件**: 並發10個請求
**測試指標**:
- ⬜ AI分析響應: < 5s (有緩存)
- ⬜ AI分析響應: < 10s (無緩存)
- ⬜ Token使用: < 2000 tokens/請求

---

### PT-004: 日曆同步性能
**測試條件**: 100個事件
**測試指標**:
- ⬜ 完整同步: < 3s
- ⬜ 增量同步: < 500ms
- ⬜ Delta Query效率: > 80%減少

---

## 🔒 安全測試

### SEC-001: API認證
- ⬜ 所有API端點都需要JWT token
- ⬜ Token過期正確處理
- ⬜ 無效token被拒絕

### SEC-002: 權限控制
- ⬜ SALES_REP只能訪問自己的提醒
- ⬜ SALES_MANAGER可訪問團隊提醒
- ⬜ ADMIN有完整訪問權限

### SEC-003: 數據隔離
- ⬜ 用戶只能看到自己的對話歷史
- ⬜ 準備包權限正確控制
- ⬜ 推薦基於用戶個人畫像

---

## 📱 響應式測試

### RES-001: 移動端適配
**測試設備**: iPhone 13, Samsung Galaxy S21
**測試頁面**:
- ⬜ 助手對話頁面
- ⬜ 準備包列表頁面
- ⬜ 日曆視圖頁面
- ⬜ 推薦卡片頁面

**預期結果**:
- ✅ 所有頁面正確顯示
- ✅ 觸控操作流暢
- ✅ 字體大小適中
- ✅ 按鈕易於點擊

---

## ✅ 驗收標準

### 功能完整性
- [ ] 所有測試用例通過率 > 95%
- [ ] 所有整合場景測試通過
- [ ] 無Critical/High級別缺陷

### 性能指標
- [ ] API響應時間達標 (P95 < 500ms)
- [ ] AI分析響應 < 5秒
- [ ] 頁面載入時間 < 2秒

### 用戶體驗
- [ ] UI/UX符合設計規範
- [ ] 響應式設計完全適配
- [ ] 無障礙性達標 (WCAG 2.1 AA)

### 安全合規
- [ ] 所有API有認證保護
- [ ] 權限控制正確實現
- [ ] 無安全漏洞

---

## 📝 測試執行記錄

### 測試輪次1
- **日期**: _（待填寫）_
- **測試人員**: _（待填寫）_
- **通過率**: _（待填寫）_
- **發現缺陷**: _（待填寫）_

### 測試輪次2 (回歸測試)
- **日期**: _（待填寫）_
- **測試人員**: _（待填寫）_
- **通過率**: _（待填寫）_
- **修復驗證**: _（待填寫）_

---

## 🐛 缺陷追蹤

| 缺陷ID | 嚴重程度 | 描述 | 狀態 | 修復版本 |
|--------|---------|------|------|---------|
| _待填寫_ | _待填寫_ | _待填寫_ | _待填寫_ | _待填寫_ |

---

## ✅ 最終簽核

### 測試負責人
- **姓名**: _（待填寫）_
- **日期**: _（待填寫）_
- **簽名**: _（待填寫）_

### 產品負責人
- **姓名**: _（待填寫）_
- **日期**: _（待填寫）_
- **簽名**: _（待填寫）_

---

**備註**: 本測試計劃涵蓋Sprint 7所有功能模組，請按順序執行測試用例並詳細記錄結果。
