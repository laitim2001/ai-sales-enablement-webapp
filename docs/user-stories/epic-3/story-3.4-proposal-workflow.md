# Story 3.4: 提案生成工作流程（詳細版）

## User Story
作為一名銷售人員，
我想要通過簡單的步驟引導完成提案生成過程，從選擇客戶到最終輸出，
以便即使是新手也能快速產出專業的提案。

## 背景說明
優秀的技術需要優秀的用戶體驗來發揮價值。直觀的工作流程降低學習曲線，提高採用率。透過智能引導和預設選項，讓提案生成變得簡單高效，同時保留高級自定義能力。

## 技術規格
- **流程引擎**：React Flow 或 BPMN.js
- **狀態管理**：XState 狀態機
- **表單框架**：React Hook Form + Yup
- **拖放功能**：react-beautiful-dnd
- **預覽技術**：實時 iframe 渲染

## 驗收標準

### 1. 流程步驟設計：
- 步驟 1：選擇客戶（搜索/瀏覽）
- 步驟 2：定義提案類型（新購/續約/升級）
- 步驟 3：需求確認（智能問卷）
- 步驟 4：內容生成（AI 處理）
- 步驟 5：審查編輯（人工調整）
- 步驟 6：輸出分發（多渠道）

### 2. 智能引導功能：
- 進度指示器（視覺化）
- 智能跳過（根據情境）
- 必填項標記
- 工具提示說明
- 範例展示
- 快速填充（基於歷史）

### 3. 模板選擇器：
- 視覺化模板預覽
- 智能推薦（基於客戶）
- 最近使用記錄
- 收藏夾功能
- 搜索和過濾
- 模板評分顯示

### 4. 內容編輯器：
- 所見即所得編輯
- 分段鎖定（保護關鍵內容）
- 協作編輯支援
- 修訂標記模式
- AI 改寫建議
- 版本對比功能

### 5. 審批工作流：
- 自動路由（基於金額/類型）
- 平行審批支援
- 審批意見收集
- 條件自動通過
- 升級機制
- 審批時限提醒

### 6. 輸出選項：
- 多格式導出（PDF/Word/PPT）
- 品牌合規檢查
- 數位簽名整合
- 追蹤連結生成
- 自定義封面信
- 批量生成支援

## 技術債務考量
- 考慮移動端適配
- 預留語音輸入介面
- 可能需要離線編輯能力
